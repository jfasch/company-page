\subsection{Character Arrays}

% --------------------------------------------------------------------
\begin{frame}
  \frametitle{Strings: Mistake by Design?}

  \begin{itemize}
  \item Only what is necessary is built-in in C
  \item From today's point of view C is \textit{the} language for
    hardware-oriented programming
  \item Invented to keep UNIX portable, independent from PDP-11 assembler
  \item $\to$ C itself is the language core --- everything else
    belongs in \textit{libraries}
  \end{itemize}

  \textbf{Contradiction:}

  \begin{itemize}
  \item Language core knows what string literals are
  \item 7-bit ASCII sufficed at that time $\to$ no multibyte character
    sets, no need for Unicode
  \item \textit{But}: much later somebody claimed that ``640K is
    enough''
  \end{itemize}
    
\end{frame}

% --------------------------------------------------------------------
\begin{frame}[fragile]
  \frametitle{Strings: Definition}

  \textbf{String} $\iff$ 

  \begin{itemize}
  \item Array of characters ...
  \item ... terminated by a ``null'' character
  \end{itemize}

  \begin{block}{}
    \begin{columns}[c]
      \begin{column}{.5\textwidth}
        \begin{block}{}
\begin{verbatim}
char a_string[] = "hello";
\end{verbatim}
        \end{block}
      \end{column}
      \begin{column}{.4\textwidth}
        \includegraphics[width=0.8\textwidth]{01-09-string}
      \end{column}
    \end{columns}
  \end{block}

\end{frame}

% --------------------------------------------------------------------
\begin{frame}
  \frametitle{Strings: Library Functions}

  \textbf{Functions} from the \textit{standard library}

  \begin{itemize}
  \item \texttt{strlen(const char[])}
  \item \texttt{strcpy(char dest[], const char src[])}
  \item \texttt{strncpy(char dest[], const char src[], int maxlen)}
  \item \texttt{strcat(char dest[], const char src[])}
  \item \texttt{strncat(char dest[], char src[], int n)}
  \item \texttt{strcmp(const char lhs[], const char rhs[])}
  \item \texttt{strncmp(const char lhs[], const char rhs[], int maxlen)}
  \item Many more $\to$ \texttt{man -s 3 string}
  \end{itemize}
    
\end{frame}

% --------------------------------------------------------------------
\begin{frame}[fragile]
  \frametitle{Strings as Parameters}

  Strings (like \textit{arrays} in general) are passed as
  \textit{pointers} 
  \linebreak
  $\implies$ \textit{Modifications visible to the caller}

  \begin{block}{}
    \begin{columns}[c]
      \begin{column}{.5\textwidth}
        \begin{block}{}
\begin{verbatim}
char a_string[] = "hello";
char another_string[10];
...
copy(another_string, a_string);
\end{verbatim}
        \end{block}
      \end{column}
      \begin{column}{.4\textwidth}
        \includegraphics[width=\textwidth]{01-09-param-passing}
      \end{column}
    \end{columns}
  \end{block}

\end{frame}

% --------------------------------------------------------------------
\begin{frame}
  \frametitle{Strings: Dangers}

  \textbf{Low level definition leads to errors}
  
  \begin{itemize}
  \item Copy: not enough memory allocated to hold the copy
  \item Forget to null-terminate when composing strings by hand
  \item ... many many more ...
  \end{itemize}
    
\end{frame}

